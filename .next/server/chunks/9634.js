"use strict";exports.id=9634,exports.ids=[9634],exports.modules={37570:(e,r,t)=>{t.r(r),t.d(r,{IMG_MAX_LIMIT:()=>y,ProductForm:()=>ProductForm});var s=t(30784),a=t(19098),n=t(9885),l=t(83894),i=t(66558),o=t(51734),d=t(57114),c=t(33770),m=t(95555),x=t(8485),h=t(73928),u=t(15715),p=t(14723),j=t(12025),g=t(12068),v=t(52451),b=t.n(v);function FileUpload({onChange:e,onRemove:r,value:t}){let{toast:a}=(0,j.pm)(),onDeleteFile=e=>{r(t.filter(r=>r.key!==e))},onUpdateFile=r=>{e([...t,...r])};return(0,s.jsxs)("div",{children:[s.jsx("div",{className:"mb-4 flex items-center gap-4",children:!!t.length&&t?.map(e=>s.jsxs("div",{className:"relative w-[200px] h-[200px] rounded-md overflow-hidden",children:[s.jsx("div",{className:"z-10 absolute top-2 right-2",children:s.jsx(m.z,{type:"button",onClick:()=>onDeleteFile(e.key),variant:"destructive",size:"sm",children:s.jsx(o.Z,{className:"h-4 w-4"})})}),s.jsx("div",{children:s.jsx(b(),{fill:!0,className:"object-cover",alt:"Image",src:e.fileUrl||""})})]},e.key))}),s.jsx("div",{children:t.length<y&&s.jsx(g.OH,{className:"dark:bg-zinc-800 py-2 ut-label:text-sm ut-allowed-content:ut-uploading:text-red-300",endpoint:"imageUploader",config:{mode:"auto"},content:{allowedContent({isUploading:e}){if(e)return s.jsx(s.Fragment,{children:s.jsx("p",{className:"mt-2 text-sm text-slate-400 animate-pulse",children:"Img Uploading..."})})}},onClientUploadComplete:e=>{e&&onUpdateFile(e)},onUploadError:e=>{a({title:"Error",variant:"destructive",description:e.message})},onUploadBegin:()=>{}})})]})}let f=a.Ry({fileName:a.Z_(),name:a.Z_(),fileSize:a.Rx(),size:a.Rx(),fileKey:a.Z_(),key:a.Z_(),fileUrl:a.Z_(),url:a.Z_()}),y=3,N=a.Ry({name:a.Z_().min(3,{message:"Product Name must be at least 3 characters"}),imgUrl:a.IX(f).max(y,{message:"You can only add up to 3 images"}).min(1,{message:"At least one image must be added."}),description:a.Z_().min(3,{message:"Product description must be at least 3 characters"}),price:a.oQ.number(),category:a.Z_().min(1,{message:"Please select a category"})}),ProductForm=({initialData:e,categories:r})=>{(0,d.useParams)();let t=(0,d.useRouter)(),{toast:a}=(0,j.pm)(),[g,v]=(0,n.useState)(!1),[b,f]=(0,n.useState)(!1),[y,w]=(0,n.useState)(!1),I=(0,i.cI)({resolver:(0,l.F)(N),defaultValues:e||{name:"",description:"",price:0,imgUrl:[],category:""}}),onSubmit=async e=>{try{f(!0),t.refresh(),t.push("/dashboard/products"),a({variant:"destructive",title:"Uh oh! Something went wrong.",description:"There was a problem with your request."})}catch(e){a({variant:"destructive",title:"Uh oh! Something went wrong.",description:"There was a problem with your request."})}finally{f(!1)}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx(u.X,{title:e?"Edit product":"Create product",description:e?"Edit a product.":"Add a new product"}),e&&s.jsx(m.z,{disabled:b,variant:"destructive",size:"sm",onClick:()=>v(!0),children:s.jsx(o.Z,{className:"h-4 w-4"})})]}),s.jsx(h.Separator,{}),s.jsx(x.l0,{...I,children:(0,s.jsxs)("form",{onSubmit:I.handleSubmit(onSubmit),className:"space-y-8 w-full",children:[s.jsx(x.Wi,{control:I.control,name:"imgUrl",render:({field:e})=>(0,s.jsxs)(x.xJ,{children:[s.jsx(x.lX,{children:"Images"}),s.jsx(x.NI,{children:s.jsx(FileUpload,{onChange:e.onChange,value:e.value,onRemove:e.onChange})}),s.jsx(x.zG,{})]})}),(0,s.jsxs)("div",{className:"md:grid md:grid-cols-3 gap-8",children:[s.jsx(x.Wi,{control:I.control,name:"name",render:({field:e})=>(0,s.jsxs)(x.xJ,{children:[s.jsx(x.lX,{children:"Name"}),s.jsx(x.NI,{children:s.jsx(c.I,{disabled:b,placeholder:"Product name",...e})}),s.jsx(x.zG,{})]})}),s.jsx(x.Wi,{control:I.control,name:"description",render:({field:e})=>(0,s.jsxs)(x.xJ,{children:[s.jsx(x.lX,{children:"Description"}),s.jsx(x.NI,{children:s.jsx(c.I,{disabled:b,placeholder:"Product description",...e})}),s.jsx(x.zG,{})]})}),s.jsx(x.Wi,{control:I.control,name:"price",render:({field:e})=>(0,s.jsxs)(x.xJ,{children:[s.jsx(x.lX,{children:"Price"}),s.jsx(x.NI,{children:s.jsx(c.I,{type:"number",disabled:b,...e})}),s.jsx(x.zG,{})]})}),s.jsx(x.Wi,{control:I.control,name:"category",render:({field:e})=>(0,s.jsxs)(x.xJ,{children:[s.jsx(x.lX,{children:"Category"}),(0,s.jsxs)(p.Ph,{disabled:b,onValueChange:e.onChange,value:e.value,defaultValue:e.value,children:[s.jsx(x.NI,{children:s.jsx(p.i4,{children:s.jsx(p.ki,{defaultValue:e.value,placeholder:"Select a category"})})}),s.jsx(p.Bw,{children:r.map(e=>s.jsx(p.Ql,{value:e._id,children:e.name},e._id))})]}),s.jsx(x.zG,{})]})})]}),s.jsx(m.z,{disabled:b,className:"ml-auto",type:"submit",children:e?"Save changes":"Create"})]})})]})}},15715:(e,r,t)=>{t.d(r,{X:()=>Heading});var s=t(30784);let Heading=({title:e,description:r})=>(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:e}),s.jsx("p",{className:"text-sm text-muted-foreground",children:r})]})},55478:(e,r,t)=>{t.d(r,{H:()=>i});var s=t(95153);let a=(0,s.createProxy)(String.raw`C:\Users\moemi\Desktop\Project_groteberen\next-shadcn-dashboard-starter-main\components\forms\product-form.tsx`),{__esModule:n,$$typeof:l}=a;a.default,(0,s.createProxy)(String.raw`C:\Users\moemi\Desktop\Project_groteberen\next-shadcn-dashboard-starter-main\components\forms\product-form.tsx#IMG_MAX_LIMIT`);let i=(0,s.createProxy)(String.raw`C:\Users\moemi\Desktop\Project_groteberen\next-shadcn-dashboard-starter-main\components\forms\product-form.tsx#ProductForm`)}};