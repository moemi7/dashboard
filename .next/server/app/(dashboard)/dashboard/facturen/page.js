(()=>{var e={};e.id=1658,e.ids=[1658],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},63477:e=>{"use strict";e.exports=require("querystring")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},99296:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>c,routeModule:()=>m,tree:()=>l});var r=s(71361),a=s(16132),i=s(37284),n=s.n(i),o=s(32564),d={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);s.d(t,d);let l=["",{children:["(dashboard)",{children:["dashboard",{children:["facturen",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,9880)),"C:\\Users\\moemi\\Desktop\\Project_groteberen\\next-shadcn-dashboard-starter-main\\app\\(dashboard)\\dashboard\\facturen\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,43020)),"C:\\Users\\moemi\\Desktop\\Project_groteberen\\next-shadcn-dashboard-starter-main\\app\\(dashboard)\\dashboard\\layout.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,75405)),"C:\\Users\\moemi\\Desktop\\Project_groteberen\\next-shadcn-dashboard-starter-main\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,44293)),"C:\\Users\\moemi\\Desktop\\Project_groteberen\\next-shadcn-dashboard-starter-main\\app\\not-found.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\moemi\\Desktop\\Project_groteberen\\next-shadcn-dashboard-starter-main\\app\\(dashboard)\\dashboard\\facturen\\page.tsx"],p="/(dashboard)/dashboard/facturen/page",u={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(dashboard)/dashboard/facturen/page",pathname:"/dashboard/facturen",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},43062:(e,t,s)=>{Promise.resolve().then(s.bind(s,37217)),Promise.resolve().then(s.bind(s,61646)),Promise.resolve().then(s.bind(s,42547)),Promise.resolve().then(s.bind(s,40509)),Promise.resolve().then(s.t.bind(s,30614,23))},18457:(e,t,s)=>{"use strict";s.d(t,{Jr:()=>Check,K5:()=>ArrowDown,ol:()=>ArrowRight,v3:()=>Plus});var r=s(30784);let ArrowDown=()=>r.jsx("svg",{width:"11",height:"7",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{d:"M1 1l4.228 4.228L9.456 1",stroke:"#7C5DFA",strokeWidth:"2",fill:"none",fillRule:"evenodd"})}),ArrowRight=()=>r.jsx("svg",{width:"7",height:"10",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{d:"M1 1l4 4-4 4",stroke:"#7C5DFA",strokeWidth:"2",fill:"none",fillRule:"evenodd"})}),Check=()=>r.jsx("svg",{width:"10",height:"8",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{d:"M1.5 4.5l2.124 2.124L8.97 1.28",stroke:"#FFF",strokeWidth:"2",fill:"none",fillRule:"evenodd"})}),Plus=()=>r.jsx("svg",{width:"11",height:"11",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{d:"M6.313 10.023v-3.71h3.71v-2.58h-3.71V.023h-2.58v3.71H.023v2.58h3.71v3.71z",fill:"#7C5DFA",fillRule:"nonzero"})})},37217:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>facturen_InvoiceCard});var r,a,i=s(30784),n=s(11440),o=s.n(n),d=s(99677),l=s(61741);(function(e){e[e.NET1=1]="NET1",e[e.NET7=7]="NET7",e[e.NET14=14]="NET14",e[e.NET30=30]="NET30"})(r||(r={})),function(e){e.NET1="Net 1 Day",e.NET7="Net 7 Days",e.NET14="Net 14 Days",e.NET30="Net 30 Days"}(a||(a={}));var c=s(18457);s(9885);let facturen_StatusBadge=({status:e})=>(0,i.jsxs)("div",{className:`row-span-2 sm:row-span-1 flex justify-center items-center px-4 py-2.5 capitalize rounded-md
                  ${"pending"===e&&"text-[#FF8F00] bg-[#FF8F00]/5"}
                  ${"draft"===e&&"dark:text-[#DFE3FA] dark:bg-[#DFE3FA]/5 text-[#373B53] bg-[#373B53]/5"}
                  ${"paid"===e&&"text-[#33D69F] bg-[#33D69F]/5"}`,children:[i.jsx("span",{className:`inline-block mr-3 h-2 w-2 rounded-full
                    ${"pending"===e&&"bg-[#FF8F00]"}
                    ${"draft"===e&&"bg-[#373B53] dark:bg-[#DFE3FA]"}
                    ${"paid"===e&&"bg-[#33D69F]"}`}),i.jsx("span",{className:"pt-1",children:e})]}),helpers_getShortId=e=>{let t=e.length;return e.substring(t-6,t)},facturen_InvoiceCard=({invoice:e})=>{let t=(0,l.Z)(new Date(e.invoiceDate),{days:r[e.paymentTerm]}),s="PENDING"===e.status?"pending":"DRAFT"===e.status?"draft":"paid";return(0,i.jsxs)(o(),{href:`/invoices/${e.id}`,className:"w-full bg-white dark:bg-[#1E2139] grid-cols-2 sm:grid-cols-[50px_110px_repeat(3,1fr)_20px] grid md:grid-cols-[80px_120px_repeat(3,1fr)_20px] items-center py-6 sm:py-4 px-6 md:px-8 rounded-md font-medium text-sm text-primary gap-1 sm:gap-4",children:[(0,i.jsxs)("div",{className:"mb-6 font-bold uppercase sm:mb-0",children:[i.jsx("span",{className:"text-[#7E88C3]",children:"#"}),helpers_getShortId(e.id)]}),(0,i.jsxs)("span",{className:"text-[#7E88C3] dark:text-[#DFE3FA]",children:["Due ",(0,d.Z)(t,"dd MMM yyyy")]}),i.jsx("span",{className:"mb-6 sm:mb-0 col-start-2 row-start-1 justify-self-end sm:justify-self-start sm:col-auto sm:row-auto text-[#858BB2] dark:text-[#FFFFFF]",children:e.clientName}),(0,i.jsxs)("span",{className:"col-start-1 row-start-3 text-base font-bold sm:col-auto sm:row-auto md:pr-5 sm:justify-self-end",children:["$ ",e.total]}),i.jsx(facturen_StatusBadge,{status:s}),i.jsx("span",{className:"justify-center hidden sm:flex",children:i.jsx(c.ol,{})})]})}},61646:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>shared_EmptyState});var r=s(30784),a=s(52451),i=s.n(a);let n={src:"/_next/static/media/illustration-empty.7369fe97.svg",height:200,width:242,blurWidth:0,blurHeight:0},shared_Button=({ariaLabel:e,label:t,type:s,onClick:a,disabled:i,icon:n,base:o,grey:d,purple:l,red:c,darkGrey:p,customGrey:u,stretch:m})=>(0,r.jsxs)("button",{"aria-label":e,onClick:a,disabled:i,type:s||"button",className:`relative flex gap-4 items-center justify-center px-5 sm:px-6 py-4 text-xs font-bold capitalize rounded-full transition disabled:cursor-not-allowed disabled:bg-opacity-50 disabled:hover:bg-opacity-50
        ${o&&"text-[#7E88C3] bg-baseBg hover:bg-baseBgHover"}
        ${c&&"text-white bg-[#ec5757] hover:bg-[#FF9797]"}
        ${l&&"text-white bg-[#7C5DFA] hover:bg-[#9277FF]"}
        ${d&&"text-[#7E88C3] dark:text-[#DFE3FA] bg-defaultBg hover:bg-defaultHoverBg"}
        ${p&&"text-secondary bg-grey hover:bg-greyHover"}
        ${u&&"text-secondary bg-greyCustom hover:bg-greyCustomHover"}
        ${m&&"w-full"}
        ${n&&"sm:pl-12"}
      `,children:[n&&r.jsx(n,{size:32,className:"absolute left-0 ml-2"}),t]});var o=s(57114);let shared_EmptyState=({title:e,subtitle:t,showReset:s})=>{let a=(0,o.useRouter)();return r.jsx("div",{className:"self-center flex-1 w-full overflow-y-auto",children:(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[r.jsx("div",{className:"mb-16 mt-6 w-[220px] sm:w-[240px]",children:r.jsx(i(),{src:n,priority:!0,alt:"Illustration"})}),r.jsx("h2",{className:"text-[20px] font-bold text-primary mb-4 w-[220px] sm:w-[240px] text-center",children:e}),r.jsx("p",{className:"text-sm font-medium text-center text-secondary mb-6 w-[220px] sm:w-[240px]",children:t}),s&&r.jsx(shared_Button,{purple:!0,label:"Go to Home Page",onClick:()=>a.push("/")})]})})}},42547:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>shared_HeaderControls});var r=s(30784),a=s(9885),i=s(18457),n=s(57114),o=s(47339);let Check=({id:e,label:t,checked:s})=>{let d=(0,n.useRouter)(),l=(0,n.useSearchParams)(),c=(0,a.useCallback)(()=>{let e={};l&&(e=o.Z.parse(l.toString()));let s={...e};l?.get(t)==="false"?delete s[t]:s="draft"===t?{...e,draft:!1}:"pending"===t?{...e,pending:!1}:{...e,paid:!1};let r=o.Z.stringifyUrl({url:"/",query:s},{skipNull:!0});d.push(r)},[t,l,d]);return(0,r.jsxs)("label",{className:"relative text-xs font-bold capitalize cursor-pointer text-primary",htmlFor:e,children:[r.jsx("input",{className:"absolute w-0 h-0 opacity-0 cursor-pointer peer",id:e,type:"checkbox",checked:s,onChange:c}),r.jsx("div",{className:"block absolute top-0 left-0 h-4 w-4 bg-[#DFE3FA] dark:bg-[#1E2139] border border-transparent hover:border-[#7C5DFA] rounded transition peer-checked:border-[#7C5DFA] peer-checked:bg-[#7C5DFA]"}),r.jsx("div",{className:"absolute hidden top-[3px] left-[2.5px] peer-checked:block",children:r.jsx(i.Jr,{})}),r.jsx("span",{className:"pl-7",children:t})]})},shared_Filter=()=>{let e=(0,n.useSearchParams)(),[t,s]=(0,a.useState)(!1),o=e?.get("draft"),d=e?.get("pending"),l=e?.get("paid");return(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("button",{onClick:()=>s(!t),className:"flex items-center gap-4 p-4 text-xs font-bold sm:px-6 sm:py-4 text-primary",children:[(0,r.jsxs)("span",{children:["Filter ",r.jsx("span",{className:"hidden sm:inline",children:"by status"})]}),r.jsx("span",{className:`${t&&"rotate-180"}`,children:r.jsx(i.K5,{})})]}),t&&(0,r.jsxs)("div",{className:"w-[192px] absolute flex flex-col gap-4 p-6 mt-1 -translate-x-1/2 rounded left-1/2 bottom-100 mt- shadow-customShadow bg-popupBg",children:[r.jsx(Check,{label:"draft",id:"draft",checked:!o}),r.jsx(Check,{label:"pending",id:"pending",checked:!d}),r.jsx(Check,{label:"paid",id:"paid",checked:!l})]})]})};var d=s(75664);let l=d.I0;var c=s(17914),p=s(54997),u=s(10345);let m=(0,c.hg)("invoice/createInvoice",async e=>{let t=await p.Z.post("/api/invoices",e);return t.data}),h=(0,c.hg)("invoice/deleteInvoice",async e=>{let t=await p.Z.delete(`/api/invoices/${e}`);return t.data}),x=(0,c.hg)("invoice/updateStatus",async e=>{let t=await p.Z.post(`/api/invoices/${e}`);return t.data}),g=(0,c.hg)("invoice/updateInvoice",async e=>{let t=await p.Z.patch(`/api/invoices/${e.invoiceId}`,e);return t.data}),b=(0,c.oM)({name:"invoice",initialState:{isOpen:!1,isLoading:!1,isEditing:!1,invoiceToEdit:null},reducers:{onOpen:e=>{e.isOpen=!0},onClose:e=>{e.isOpen=!1,e.isEditing=!1,e.invoiceToEdit=null},onEdit:(e,t)=>{e.isOpen=!0,e.isEditing=!0,e.invoiceToEdit=t.payload}},extraReducers:e=>{e.addCase(m.pending,e=>{e.isLoading=!0}),e.addCase(m.fulfilled,(e,t)=>{e.isLoading=!1,u.Am.success("Invoice is created!"),e.isOpen=!1}),e.addCase(m.rejected,(e,t)=>{e.isLoading=!1,u.Am.error("Something went wrong")}),e.addCase(h.pending,e=>{e.isLoading=!0}),e.addCase(h.fulfilled,(e,t)=>{e.isLoading=!1,u.Am.success("Invoice is deleted!")}),e.addCase(h.rejected,(e,t)=>{e.isLoading=!1,u.Am.error("Something went wrong")}),e.addCase(x.pending,e=>{e.isLoading=!0}),e.addCase(x.fulfilled,(e,t)=>{e.isLoading=!1,u.Am.success("Status is updated!")}),e.addCase(x.rejected,(e,t)=>{e.isLoading=!1,u.Am.error("Something went wrong")}),e.addCase(g.pending,e=>{e.isLoading=!0}),e.addCase(g.fulfilled,(e,t)=>{e.isLoading=!1,u.Am.success("Invoice is updated!"),e.isOpen=!1}),e.addCase(g.rejected,(e,t)=>{e.isLoading=!1,u.Am.error("Something went wrong")})}});b.reducer;let{onOpen:f,onClose:v,onEdit:w}=b.actions;var j=s(74284);let y=(0,c.hg)("loginModal/loginUser",async(e,t)=>{let s=await (0,j.signIn)("credentials",{...e,redirect:!1});return s&&!s.ok?t.rejectWithValue(s.error):s}),C=(0,c.oM)({name:"loginModal",initialState:{isOpen:!1,isLoading:!1},reducers:{onOpen:e=>{e.isOpen=!0},onClose:e=>{e.isOpen=!1}},extraReducers:e=>{e.addCase(y.pending,e=>{e.isLoading=!0}),e.addCase(y.fulfilled,(e,t)=>{e.isLoading=!1,u.Am.success("Welcome back!"),e.isOpen=!1}),e.addCase(y.rejected,(e,t)=>{e.isLoading=!1,u.Am.error(t.payload)})}});C.reducer;let{onOpen:N,onClose:_}=C.actions,shared_HeaderControls=({currentUser:e,numOfInvoices:t})=>{let s=l(),n=(0,a.useCallback)(()=>{if(!e)return s(N());s(f())},[e,s]);return(0,r.jsxs)("div",{className:"z-10 flex justify-between",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-1 sm:gap-2",children:[r.jsx("h1",{className:"text-[20px] sm:text-[32px] font-bold text-primary",children:"Invoices"}),r.jsx("p",{className:"text-xs font-medium text-secondary",children:0===t?"No invoices":`There are ${t} total invoices`})]}),(0,r.jsxs)("div",{className:"flex items-center gap-6 sm:gap-10",children:[r.jsx(shared_Filter,{}),(0,r.jsxs)("button",{onClick:n,className:"flex gap-2 sm:gap-4 items-center p-1.5 pr-3 sm:p-2 sm:pr-4 text-xs font-bold capitalize rounded-full transition text-white bg-[#7C5DFA] hover:bg-[#9277FF]",children:[r.jsx("span",{className:"p-2.5 bg-white rounded-full",children:r.jsx(i.v3,{})}),(0,r.jsxs)("div",{children:["New ",r.jsx("span",{className:"hidden sm:inline",children:"Invoice"})]})]})]})]})}},9880:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>I,dynamic:()=>D});var r=s(4656),a=s(16526),i=s(40674);let n=require("bcrypt");var o=s.n(n),d=s(94020),l=s.n(d),c=s(39448),p=s(90596),u=s(49375),m=s(77592);let h=require("@prisma/client"),x=globalThis.prisma||new h.PrismaClient,g={adapter:(0,m.N)(x),providers:[(0,p.Z)({clientId:process.env.GITHUB_ID,clientSecret:process.env.GITHUB_SECRET}),(0,u.Z)({clientId:process.env.GOOGLE_CLIENT_ID,clientSecret:process.env.GOOGLE_CLIENT_SECRET}),(0,c.Z)({name:"credentials",credentials:{email:{label:"email",type:"text"},password:{label:"password",type:"password"}},async authorize(e){if(!e?.email||!e?.password)throw Error("Invalid credentials");let t=await x.user.findUnique({where:{email:e.email}});if(!t||!t?.hashedPassword)throw Error("Invalid credentials");let s=await o().compare(e.password,t.hashedPassword);if(!s)throw Error("Invalid credentials");return t}})],pages:{signIn:"/"},debug:!1,session:{strategy:"jwt"},secret:process.env.NEXTAUTH_SECRET};async function getSession(){return await (0,i.getServerSession)(g)}async function getCurrentUser(){try{let e=await getSession();if(!e?.user?.email)return null;let t=await x.user.findUnique({where:{email:e.user.email}});if(!t)return null;return{...t,createdAt:t.createdAt.toISOString(),updatedAt:t.updatedAt.toISOString(),emailVerified:t.emailVerified?.toISOString()||null}}catch(e){return null}}async function getInvoices(e){try{let{draft:t,pending:s,paid:r}=e,a=await getCurrentUser();if(!a)return[];let i={};i.userId=a.id;let n=[];t||n.push({status:h.Status.DRAFT}),s||n.push({status:h.Status.PENDING}),r||n.push({status:h.Status.PAID}),(r||s||t)&&(i.OR=n);let o=await x.invoice.findMany({where:i,include:{items:!0}}),d=o.map(e=>({...e,invoiceDate:e.invoiceDate.toString(),createdAt:e.createdAt.toString(),updatedAt:e.updatedAt.toString()}));return d}catch(e){throw Error(e)}}l()(g);var b=s(95153);let f=(0,b.createProxy)(String.raw`C:\Users\moemi\Desktop\Project_groteberen\next-shadcn-dashboard-starter-main\components\facturen\InvoiceCard.tsx`),{__esModule:v,$$typeof:w}=f,j=f.default,y=(0,b.createProxy)(String.raw`C:\Users\moemi\Desktop\Project_groteberen\next-shadcn-dashboard-starter-main\components\shared\EmptyState.tsx`),{__esModule:C,$$typeof:N}=y,_=y.default,k=(0,b.createProxy)(String.raw`C:\Users\moemi\Desktop\Project_groteberen\next-shadcn-dashboard-starter-main\components\shared\HeaderControls.tsx`),{__esModule:F,$$typeof:E}=k,P=k.default;var S=s(12096);let D="force-dynamic",A=[{title:"Facturen",link:"/dashboard/facturen"}],Home=async e=>{let{searchParams:t}=e,s=await getInvoices(t),i=await getCurrentUser();return 0===s.length?r.jsx(S.x,{className:"h-full",children:(0,r.jsxs)("div",{className:"flex-1 space-y-4 p-4 md:p-8 pt-6",children:[r.jsx(a.Z,{items:A}),(0,r.jsxs)(r.Fragment,{children:[r.jsx(P,{currentUser:i,numOfInvoices:s.length}),r.jsx(_,{title:"There is nothing here",subtitle:"Create a new invoice by clicking the New Invoice button and get started"})]})]})}):r.jsx(S.x,{className:"h-full",children:(0,r.jsxs)("div",{className:"flex-1 space-y-4 p-4 md:p-8 pt-6",children:[r.jsx(a.Z,{items:A}),(0,r.jsxs)(r.Fragment,{children:[r.jsx(P,{currentUser:i,numOfInvoices:s.length}),r.jsx("div",{className:"flex flex-col gap-3 overflow-y-auto",children:s.map((e,t)=>r.jsx(j,{invoice:e},t))})]})]})})},I=Home},12096:(e,t,s)=>{"use strict";s.d(t,{x:()=>o});var r=s(95153);let a=(0,r.createProxy)(String.raw`C:\Users\moemi\Desktop\Project_groteberen\next-shadcn-dashboard-starter-main\components\ui\scroll-area.tsx`),{__esModule:i,$$typeof:n}=a;a.default;let o=(0,r.createProxy)(String.raw`C:\Users\moemi\Desktop\Project_groteberen\next-shadcn-dashboard-starter-main\components\ui\scroll-area.tsx#ScrollArea`);(0,r.createProxy)(String.raw`C:\Users\moemi\Desktop\Project_groteberen\next-shadcn-dashboard-starter-main\components\ui\scroll-area.tsx#ScrollBar`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[8001,2293,6631,1008,1779,2451,8844,6122,8652,2844,5176,469,6526,509],()=>__webpack_exec__(99296));module.exports=s})();